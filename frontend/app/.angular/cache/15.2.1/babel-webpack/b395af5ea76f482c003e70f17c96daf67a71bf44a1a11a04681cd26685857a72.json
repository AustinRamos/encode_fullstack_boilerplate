{"ast":null,"code":"import _asyncToGenerator from \"/Users/austinramos/Documents/Workspace/Encode_Bootcamp/14_15_code/frontend/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ethers } from 'ethers';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction AppComponent_div_4_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h5\", 13);\n    i0.ɵɵtext(3, \"User Wallet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h6\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 15);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"a\", 16);\n    i0.ɵɵtext(9, \"Card link\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"a\", 16);\n    i0.ɵɵtext(11, \"Another link\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.userWallet.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Balance: \", ctx_r1.userEthBalance, \" Eth\");\n  }\n}\nfunction AppComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"p\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.handleAuth());\n    });\n    i0.ɵɵtext(4, \" Connect Wallet \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function AppComponent_div_4_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.createWallet());\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AppComponent_div_4_div_7_Template, 12, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" We are connected to Goerli at Block number \", ctx_r0.blockNumber, \". \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userWallet ? \"Recreate\" : \"Create\", \" Wallet \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.userWallet);\n  }\n}\nexport class AppComponent {\n  constructor() {\n    this.blockNumber = 0;\n    this.provider = ethers.getDefaultProvider('goerli');\n    //setInterval(()=>{this.blockNumber +=1 })\n  }\n\n  syncBlock() {\n    //this.blockNumber = \"loading...\";\n    this.provider.getBlock(\"latest\").then(block => {\n      this.blockNumber = block.number;\n      this.transactions = block.transactions;\n    });\n  }\n  createWallet() {\n    this.userWallet = ethers.Wallet.createRandom().connect(this.provider);\n    this.userWallet.getBalance().then(bal => {\n      this.userEthBalance = parseFloat(ethers.utils.formatEther(bal));\n    });\n  }\n  handleAuth() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      console.log(\"HANDLE AUTH***\");\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      //const signer = await provider.getSigner();\n      provider.send(\"eth_requestAccounts\", []).then( /*#__PURE__*/_asyncToGenerator(function* () {\n        _this.userWallet = provider.getSigner();\n      }));\n    })();\n  }\n  clearBlock() {\n    this.blockNumber = 1;\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)();\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 10,\n  vars: 1,\n  consts: [[1, \"px-4\", \"py-5\", \"my-5\", \"text-center\"], [1, \"display-5\", \"fw-bold\"], [1, \"col-lg-6\", \"mx-auto\"], [\"class\", \"mt-4\", 4, \"ngIf\"], [1, \"d-grid\", \"gap-2\", \"d-sm-flex\", \"justify-content-sm-center\", \"mt-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"px-4\", \"gap-3\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"px-4\", 3, \"click\"], [1, \"mt-4\"], [1, \"lead\", \"mb-4\", \"my-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-lg\", \"px-4\", \"gap-3\", \"my-4\", 3, \"click\"], [\"class\", \"card mt-4 mx-auto\", 4, \"ngIf\"], [1, \"card\", \"mt-4\", \"mx-auto\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-subtitle\", \"mb-2\", \"text-muted\"], [1, \"card-text\"], [\"href\", \"#\", 1, \"card-link\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Hello\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, AppComponent_div_4_Template, 8, 3, \"div\", 3);\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_6_listener() {\n        return ctx.syncBlock();\n      });\n      i0.ɵɵtext(7, \"Sync\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_8_listener() {\n        return ctx.clearBlock();\n      });\n      i0.ɵɵtext(9, \"Clear\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.blockNumber && ctx.blockNumber > 0);\n    }\n  },\n  dependencies: [i1.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AACA,SAAQA,MAAM,QAAe,QAAQ;;;;;ICsB/BC,+BAAmD;IAExBA,2BAAW;IAAAA,iBAAK;IACvCA,8BAA0C;IAAAA,YAAsB;IAAAA,iBAAK;IACrEA,6BAAqB;IAACA,YAA+B;IAAAA,iBAAI;IACzDA,6BAA8B;IAAAA,yBAAS;IAAAA,iBAAI;IAC3CA,8BAA8B;IAAAA,6BAAY;IAAAA,iBAAI;;;;IAHJA,eAAsB;IAAtBA,+CAAsB;IAC1CA,eAA+B;IAA/BA,kEAA+B;;;;;;IAjBzDA,8BAA0D;IAE1DA,YAEC;IAAAA,iBAAI;IACPA,iCAA+F;IAA1BA;MAAAA;MAAA;MAAA,OAAWA,kCAAY;IAAA,EAAC;IAC3FA,gCACF;IAAAA,iBAAS;IACTA,iCAAiG;IAA5BA;MAAAA;MAAA;MAAA,OAAWA,oCAAc;IAAA,EAAC;IAC7FA,YACF;IAAAA,iBAAS;IAGPA,qEAQM;IACRA,iBAAM;;;;IApBJA,eAEC;IAFDA,+FAEC;IAKDA,eACF;IADEA,iFACF;IAGQA,eAAgB;IAAhBA,wCAAgB;;;ADd5B,OAAM,MAAOC,YAAY;EAOvBC;IALA,gBAAW,GAAW,CAAC;IAMpB,IAAI,CAACC,QAAQ,GAAGJ,MAAM,CAACK,kBAAkB,CAAC,QAAQ,CAAC;IACnD;EACD;;EAEAC,SAAS;IACP;IACF,IAAI,CAACF,QAAQ,CAACG,QAAQ,CAAC,QAAQ,CAAC,CAACC,IAAI,CAACC,KAAK,IAAE;MAC3C,IAAI,CAACC,WAAW,GAAGD,KAAK,CAACE,MAAM;MAC/B,IAAI,CAACC,YAAY,GAAGH,KAAK,CAACG,YAAY;IAExC,CAAC,CAAC;EACF;EAEAC,YAAY;IACV,IAAI,CAACC,UAAU,GAAGd,MAAM,CAACe,MAAM,CAACC,YAAY,EAAE,CAACC,OAAO,CAAC,IAAI,CAACb,QAAQ,CAAC;IACrE,IAAI,CAACU,UAAU,CAACI,UAAU,EAAE,CAACV,IAAI,CAACW,GAAG,IAAE;MACrC,IAAI,CAACC,cAAc,GAAGC,UAAU,CAACrB,MAAM,CAACsB,KAAK,CAACC,WAAW,CAACJ,GAAG,CAAC,CAAC;IACjE,CAAC,CAAC;EACJ;EAEMK,UAAU;IAAA;IAAA;MACdC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7B,MAAMtB,QAAQ,GAAG,IAAIJ,MAAM,CAAC2B,SAAS,CAACC,YAAY,CAACC,MAAM,CAACC,QAAQ,CAAC;MAEzE;MAGE1B,QAAQ,CAAC2B,IAAI,CAAC,qBAAqB,EAAE,EAAE,CAAC,CAACvB,IAAI,iCAAC,aAAW;QACrD,KAAI,CAACM,UAAU,GAAGV,QAAQ,CAAC4B,SAAS,EAAE;MAC1C,CAAC,EAAC;IAAA;EAKA;EAEAC,UAAU;IACR,IAAI,CAACvB,WAAW,GAAG,CAAC;EAEtB;;AA/CSR,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;QAAZA,YAAY;EAAAgC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCFzBrC,8BAAwC;MACRA,qBAAK;MAAAA,iBAAK;MACxCA,8BAA8B;MAC1BA,6DAsBI;MAENA,8BAAmE;MACDA;QAAA,OAAWsC,eAAW;MAAA,EAAC;MAAEtC,oBAAI;MAAAA,iBAAS;MACtGA,iCAA8F;MAA1BA;QAAA,OAAWsC,gBAAY;MAAA,EAAC;MAAEtC,qBAAK;MAAAA,iBAAS;;;MA1BtGA,eAAkC;MAAlCA,6DAAkC","names":["ethers","i0","AppComponent","constructor","provider","getDefaultProvider","syncBlock","getBlock","then","block","blockNumber","number","transactions","createWallet","userWallet","Wallet","createRandom","connect","getBalance","bal","userEthBalance","parseFloat","utils","formatEther","handleAuth","console","log","providers","Web3Provider","window","ethereum","send","getSigner","clearBlock","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/austinramos/Documents/Workspace/Encode_Bootcamp/14_15_code/frontend/app/src/app/app.component.ts","/Users/austinramos/Documents/Workspace/Encode_Bootcamp/14_15_code/frontend/app/src/app/app.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {ethers, Wallet} from 'ethers';\ndeclare let window: any\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  provider: ethers.providers.BaseProvider;\n  blockNumber: number = 0;\n  transactions: string[] | undefined;\n  userWallet: Wallet | undefined;\n  userEthBalance: number | undefined;\n\n  constructor(){\n     this.provider = ethers.getDefaultProvider('goerli');\n     //setInterval(()=>{this.blockNumber +=1 })\n    }\n\n    syncBlock(){\n      //this.blockNumber = \"loading...\";\n    this.provider.getBlock(\"latest\").then(block=>{\n      this.blockNumber = block.number;\n      this.transactions = block.transactions;\n      \n    })\n    }\n\n    createWallet(){\n      this.userWallet = ethers.Wallet.createRandom().connect(this.provider);\n      this.userWallet.getBalance().then(bal=>{\n        this.userEthBalance = parseFloat(ethers.utils.formatEther(bal));\n      })\n    }\n\n    async handleAuth() {\n      console.log(\"HANDLE AUTH***\")\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n       \n//const signer = await provider.getSigner();\n\n\n  provider.send(\"eth_requestAccounts\", []).then(async () => {\n      this.userWallet = provider.getSigner();\n  })\n\n\n\n\n    }\n\n    clearBlock(){\n      this.blockNumber = 1;\n    \n    }\n}\n\n","<!-- <p> My name is {{myName}}</p>\n\n<p>Block number is {{blockNumber}}</p>\n\n<div class=\"container  text-center mt-5 mb-5\">\n  <h1>Bootstrap 5 is working fine with Angular 15!!</h1>\n</div> -->\n<div class=\"px-4 py-5 my-5 text-center\">\n  <h1 class=\"display-5 fw-bold\">Hello</h1>\n  <div class=\"col-lg-6 mx-auto\">\n      <div *ngIf=\"blockNumber && blockNumber>0\" class = \"mt-4\" >\n    <p class=\"lead mb-4 my-4\">\n      We are connected to Goerli at\n       Block number {{blockNumber}}. \n       </p>\n    <button type=\"button\" class=\"btn btn-success btn-lg px-4 gap-3 my-4\" (click) = \"handleAuth()\" >\n      Connect Wallet\n    </button>\n    <button type=\"button\" class=\"btn btn-success btn-lg px-4 gap-3 my-4\" (click) = \"createWallet()\" >\n      {{userWallet ? \"Recreate\" : \"Create\"}} Wallet\n    </button>\n    \n\n      <div *ngIf=\"userWallet\" class=\"card mt-4 mx-auto\" >\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">User Wallet</h5>\n          <h6 class=\"card-subtitle mb-2 text-muted\">{{userWallet.address}}</h6>\n          <p class=\"card-text\"> Balance: {{userEthBalance}} Eth</p>\n          <a href=\"#\" class=\"card-link\">Card link</a>\n          <a href=\"#\" class=\"card-link\">Another link</a>\n        </div>\n      </div>\n    </div>\n  \n    <div class=\"d-grid gap-2 d-sm-flex justify-content-sm-center mt-4\">\n      <button type=\"button\" class=\"btn btn-primary btn-lg px-4 gap-3\" (click) = \"syncBlock()\" >Sync</button>\n      <button type=\"button\" class=\"btn btn-outline-secondary btn-lg px-4\" (click) = \"clearBlock()\" >Clear</button>\n    </div>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}